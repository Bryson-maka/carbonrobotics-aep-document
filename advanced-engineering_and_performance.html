<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Engineering & Performance Team Scope</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
            margin-bottom: 20px;
        }

        .header .meta {
            display: flex;
            justify-content: center;
            gap: 30px;
            font-size: 0.9em;
            opacity: 0.8;
        }

        .controls {
            background: #f8f9fa;
            padding: 15px 40px;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .edit-toggle {
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            transition: background 0.3s ease;
        }

        .edit-toggle:hover {
            background: #764ba2;
        }

        .edit-toggle.active {
            background: #28a745;
        }

        .save-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            margin-left: 10px;
            display: none;
        }

        .save-btn:hover {
            background: #218838;
        }

        .executive-summary {
            padding: 40px;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
        }

        .executive-summary h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .mission-box {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            padding: 25px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 5px solid #2196f3;
        }

        .mission-box strong {
            color: #1976d2;
        }

        .accordion {
            padding: 0 40px 40px 40px;
        }

        .accordion-item {
            margin-bottom: 15px;
            border: 1px solid #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .accordion-item:hover {
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .accordion-header {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 20px 25px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
            border: none;
            width: 100%;
            text-align: left;
            font-size: 1.1em;
            font-weight: 600;
            color: #2c3e50;
        }

        .accordion-header:hover {
            background: linear-gradient(135deg, #e9ecef 0%, #dee2e6 100%);
        }

        .accordion-header.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .accordion-icon {
            font-size: 1.2em;
            transition: transform 0.3s ease;
        }

        .accordion-header.active .accordion-icon {
            transform: rotate(180deg);
        }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease;
            background: white;
        }

        .accordion-content.active {
            max-height: 2500px;
        }

        .accordion-body {
            padding: 25px;
        }

        .subsection {
            margin-bottom: 25px;
        }

        .subsection h4 {
            color: #495057;
            margin-bottom: 15px;
            font-size: 1.1em;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 5px;
        }

        /* Consistent Outstanding Question Styling */
        .outstanding-question {
            background: #fff3cd;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #ffc107;
        }

        .outstanding-question .question-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .outstanding-question .warning-icon {
            color: #856404;
            margin-right: 8px;
            font-size: 1.1em;
        }

        .outstanding-question strong {
            color: #856404;
        }

        /* Regular established facts/current state */
        .current-state {
            background: #e8f5e8;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #28a745;
        }

        .phase-item {
            background: #f1f3f4;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .phase-item h4 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .success-metric {
            background: #e8f5e8;
            padding: 10px 15px;
            margin: 8px 0;
            border-radius: 5px;
            border-left: 3px solid #28a745;
        }

        /* Edit Mode Styles */
        .answer-input {
            width: 100%;
            min-height: 80px;
            margin-top: 10px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-family: inherit;
            font-size: 0.9em;
            resize: vertical;
            display: none;
        }

        .edit-mode .answer-input {
            display: block;
        }

        .answered {
            background: #d1ecf1;
            border-left-color: #17a2b8;
        }

        ul, ol {
            padding-left: 25px;
            margin: 15px 0;
        }

        li {
            margin: 8px 0;
        }

        .scroll-top {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            opacity: 0;
            visibility: hidden;
        }

        .scroll-top.visible {
            opacity: 1;
            visibility: visible;
        }

        .scroll-top:hover {
            background: #764ba2;
            transform: translateY(-2px);
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 10px;
            }
            
            .header {
                padding: 30px 20px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .header .meta {
                flex-direction: column;
                gap: 10px;
            }
            
            .accordion {
                padding: 0 20px 30px 20px;
            }
            
            .executive-summary {
                padding: 30px 20px;
            }

            .controls {
                padding: 15px 20px;
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Advanced Engineering & Performance</h1>
            <div class="subtitle">Carbon Robotics LaserWeeder Platform</div>
            <div class="meta">
                <div>Document Version: 2.0</div>
                <div>Date: 2025-01-09</div>
                <div>Status: Streamlined for Team Discussion</div>
            </div>
        </div>

        <div class="controls">
            <div>
                <button class="edit-toggle" onclick="toggleEditMode()">üìù Enable Interactive Mode</button>
                <button class="save-btn" onclick="saveAnswers()">üíæ Save Answers</button>
            </div>
            <div style="font-size: 0.9em; color: #666;">
                ‚ö†Ô∏è = Outstanding Questions ‚Ä¢ ‚úÖ = Current Capabilities
            </div>
        </div>

        <div class="executive-summary">
            <h2>Executive Summary</h2>
            <p>The Advanced Engineering & Performance team will establish <strong>data-driven performance excellence</strong> across the Carbon Robotics LaserWeeder fleet. This team bridges the gap between technical capability and customer success by defining, measuring, and optimizing the performance relationship between customer expectations and actual machine performance.</p>
            
            <div class="mission-box">
                <strong>Mission:</strong> Transform Carbon Robotics from reactive support to predictive performance optimization through systematic measurement, analysis, and continuous improvement based on field operations and remote visibility.
            </div>
        </div>

        <div class="accordion">
            <!-- Section 1: Performance Standards & Measurement -->
            <div class="accordion-item">
                <button class="accordion-header">
                    <span>1. Performance Standards & Measurement</span>
                    <span class="accordion-icon">‚ñº</span>
                </button>
                <div class="accordion-content">
                    <div class="accordion-body">
                        <div class="subsection">
                            <h4>Success Definition & Ownership</h4>
                            
                            <div class="outstanding-question" data-question="customer-success-definition">
                                <div class="question-header">
                                    <span class="warning-icon">‚ö†Ô∏è</span>
                                    <strong>Customer Success Definition</strong>
                                </div>
                                What constitutes "successful weeding" from the customer's perspective?
                                <ul>
                                    <li>Weed elimination percentage threshold (e.g., >99% accuracy)</li>
                                    <li>Crop damage tolerance (e.g., <1% crops affected)</li>
                                    <li>Field coverage efficiency (acres/hour based on conditions)</li>
                                </ul>
                                <textarea class="answer-input" placeholder="Enter discussion notes and decisions..."></textarea>
                            </div>

                            <div class="outstanding-question" data-question="performance-ownership">
                                <div class="question-header">
                                    <span class="warning-icon">‚ö†Ô∏è</span>
                                    <strong>Performance Standard Ownership</strong>
                                </div>
                                Who defines "good performance" - Carbon or customer?
                                <ul>
                                    <li>How should Carbon establish standard benchmarks?</li>
                                    <li>How do customers define their individual success criteria?</li>
                                    <li>How do we handle conflicting expectations pre/post sale?</li>
                                </ul>
                                <textarea class="answer-input" placeholder="Enter discussion notes and decisions..."></textarea>
                            </div>

                            <div class="outstanding-question" data-question="validation-methods">
                                <div class="question-header">
                                    <span class="warning-icon">‚ö†Ô∏è</span>
                                    <strong>Success Validation Methods</strong>
                                </div>
                                How should performance be measured and validated?
                                <ul>
                                    <li>Real-time machine metrics vs. post-field outcome validation</li>
                                    <li>Customer self-reporting vs. Carbon verification</li>
                                    <li>Acceptable deviation thresholds from target performance</li>
                                </ul>
                                <textarea class="answer-input" placeholder="Enter discussion notes and decisions..."></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 2: Configuration & Customer Experience -->
            <div class="accordion-item">
                <button class="accordion-header">
                    <span>2. Configuration & Customer Experience</span>
                    <span class="accordion-icon">‚ñº</span>
                </button>
                <div class="accordion-content">
                    <div class="accordion-body">
                        <div class="subsection">
                            <h4>Current Configuration Complexity</h4>
                            
                            <div class="current-state">
                                <strong>‚úÖ Current System Capabilities:</strong><br>
                                The LaserWeeder has numerous configuration parameters:
                                <ul>
                                    <li>DeepWeed model thresholds and WPT vs. CPT confidence levels</li>
                                    <li>P2P health and performance accuracy settings</li>
                                    <li>Scanner health and settle times</li>
                                    <li>Laser firing profiles based on field conditions</li>
                                </ul>
                            </div>

                            <div class="outstanding-question" data-question="configuration-simplification">
                                <div class="question-header">
                                    <span class="warning-icon">‚ö†Ô∏è</span>
                                    <strong>Configuration Simplification Strategy</strong>
                                </div>
                                How complex should configuration be for customers?
                                <ul>
                                    <li>What should be "plug-and-play" vs. customer-configurable?</li>
                                    <li>What technical expertise level should we assume?</li>
                                    <li>How quickly should customers reach optimal settings?</li>
                                </ul>
                                <textarea class="answer-input" placeholder="Enter discussion notes and decisions..."></textarea>
                            </div>

                            <div class="outstanding-question" data-question="feedback-mechanisms">
                                <div class="question-header">
                                    <span class="warning-icon">‚ö†Ô∏è</span>
                                    <strong>Performance Feedback & Guidance</strong>
                                </div>
                                How do customers know when settings need adjustment?
                                <ul>
                                    <li>Real-time performance scoring and alerts</li>
                                    <li>Early warning indicators for Carbon intervention</li>
                                    <li>Guidance tools for optimization</li>
                                </ul>
                                <textarea class="answer-input" placeholder="Enter discussion notes and decisions..."></textarea>
                            </div>

                            <div class="outstanding-question" data-question="planning-tools">
                                <div class="question-header">
                                    <span class="warning-icon">‚ö†Ô∏è</span>
                                    <strong>Job Planning & Prediction Tools</strong>
                                </div>
                                What planning capabilities should we provide?
                                <ul>
                                    <li>Entry timing evaluations for field planning</li>
                                    <li>Job performance predictions and confidence levels</li>
                                    <li>Coverage visualization and optimization</li>
                                </ul>
                                <textarea class="answer-input" placeholder="Enter discussion notes and decisions..."></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 3: Monitoring & Proactive Intervention -->
            <div class="accordion-item">
                <button class="accordion-header">
                    <span>3. Monitoring & Proactive Intervention</span>
                    <span class="accordion-icon">‚ñº</span>
                </button>
                <div class="accordion-content">
                    <div class="accordion-body">
                        <div class="subsection">
                            <h4>Current Monitoring Infrastructure</h4>
                            
                            <div class="current-state">
                                <strong>‚úÖ Real-time Monitoring Capabilities:</strong><br>
                                Comprehensive monitoring through Prometheus/Grafana:
                                <ul>
                                    <li><strong>Laser/Scanner:</strong> Utilization %, overhead times, error rates</li>
                                    <li><strong>Computer Vision:</strong> DeepWeed accuracy, model confidence, P2P accuracy</li>
                                    <li><strong>Mechanical:</strong> Scanner accuracy, positioning errors, camera health</li>
                                    <li><strong>Remote Alerting:</strong> Semi-reliable alarms and custom dashboards</li>
                                </ul>
                            </div>

                            <div class="outstanding-question" data-question="intervention-strategy">
                                <div class="question-header">
                                    <span class="warning-icon">‚ö†Ô∏è</span>
                                    <strong>Proactive Intervention Strategy</strong>
                                </div>
                                When and how should Carbon intervene proactively?
                                <ul>
                                    <li>Performance deviation triggers for automatic alerts</li>
                                    <li>Escalation procedures: automatic vs. recommended vs. manual</li>
                                    <li>Balance between customer autonomy and proactive support</li>
                                </ul>
                                <textarea class="answer-input" placeholder="Enter discussion notes and decisions..."></textarea>
                            </div>

                            <div class="outstanding-question" data-question="monitoring-granularity">
                                <div class="question-header">
                                    <span class="warning-icon">‚ö†Ô∏è</span>
                                    <strong>Monitoring Scope & Timing</strong>
                                </div>
                                How should fleet-wide performance monitoring work?
                                <ul>
                                    <li>Real-time vs. daily vs. weekly vs. event-driven monitoring</li>
                                    <li>Fleet-wide performance variation tracking</li>
                                    <li>Immediate vs. trend-based analysis requirements</li>
                                </ul>
                                <textarea class="answer-input" placeholder="Enter discussion notes and decisions..."></textarea>
                            </div>

                            <div class="outstanding-question" data-question="response-model">
                                <div class="question-header">
                                    <span class="warning-icon">‚ö†Ô∏è</span>
                                    <strong>Support Response Framework</strong>
                                </div>
                                How should Carbon's support response work?
                                <ul>
                                    <li>When to initiate contact vs. wait for customer issues</li>
                                    <li>Performance degradation patterns requiring immediate action</li>
                                    <li>Measuring intervention effectiveness</li>
                                </ul>
                                <textarea class="answer-input" placeholder="Enter discussion notes and decisions..."></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 4: Responsibility & Ownership Framework -->
            <div class="accordion-item">
                <button class="accordion-header">
                    <span>4. Responsibility & Ownership Framework</span>
                    <span class="accordion-icon">‚ñº</span>
                </button>
                <div class="accordion-content">
                    <div class="accordion-body">
                        <div class="subsection">
                            <h4>Ownership Boundaries</h4>

                            <div class="outstanding-question" data-question="customer-ownership">
                                <div class="question-header">
                                    <span class="warning-icon">‚ö†Ô∏è</span>
                                    <strong>Customer Sole Responsibility</strong>
                                </div>
                                What should customers be fully responsible for?
                                <ul>
                                    <li>Field preparation and planning</li>
                                    <li>Basic maintenance and cleaning</li>
                                    <li>Initial configuration parameter selection</li>
                                    <li>Performance expectation setting</li>
                                </ul>
                                <textarea class="answer-input" placeholder="Enter discussion notes and decisions..."></textarea>
                            </div>

                            <div class="outstanding-question" data-question="carbon-ownership">
                                <div class="question-header">
                                    <span class="warning-icon">‚ö†Ô∏è</span>
                                    <strong>Carbon Sole Responsibility</strong>
                                </div>
                                What should Carbon be fully responsible for?
                                <ul>
                                    <li>Software updates and bug fixes</li>
                                    <li>Hardware reliability and warranty</li>
                                    <li>Algorithm accuracy and model performance</li>
                                    <li>Technical support for performance issues</li>
                                </ul>
                                <textarea class="answer-input" placeholder="Enter discussion notes and decisions..."></textarea>
                            </div>

                            <div class="outstanding-question" data-question="shared-ownership">
                                <div class="question-header">
                                    <span class="warning-icon">‚ö†Ô∏è</span>
                                    <strong>Collaborative Ownership</strong>
                                </div>
                                What requires joint Carbon-Customer ownership?
                                <ul>
                                    <li>Performance optimization and tuning</li>
                                    <li>Field condition adaptation</li>
                                    <li>Success metric definition and measurement</li>
                                    <li>Training and knowledge transfer</li>
                                </ul>
                                <textarea class="answer-input" placeholder="Enter discussion notes and decisions..."></textarea>
                            </div>

                            <div class="outstanding-question" data-question="accountability">
                                <div class="question-header">
                                    <span class="warning-icon">‚ö†Ô∏è</span>
                                    <strong>Performance Accountability</strong>
                                </div>
                                How do we handle performance disputes and continuous improvement?
                                <ul>
                                    <li>Root cause ownership determination when performance falls short</li>
                                    <li>SLA formalization between Carbon and customers</li>
                                    <li>Continuous improvement prioritization across customer base</li>
                                </ul>
                                <textarea class="answer-input" placeholder="Enter discussion notes and decisions..."></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 5: Technical Implementation -->
            <div class="accordion-item">
                <button class="accordion-header">
                    <span>5. Technical Implementation & Team Structure</span>
                    <span class="accordion-icon">‚ñº</span>
                </button>
                <div class="accordion-content">
                    <div class="accordion-body">
                        <div class="subsection">
                            <h4>Current vs. Required Capabilities</h4>
                            
                            <div class="current-state">
                                <strong>‚úÖ Ready for Implementation:</strong>
                                <ul>
                                    <li>Comprehensive sensor/system data with real-time collection</li>
                                    <li>Grafana monitoring stack operational (needs verification)</li>
                                    <li>Ground truth validation framework established</li>
                                    <li>Multi-layered data architecture for performance correlation</li>
                                </ul>
                            </div>

                            <div class="outstanding-question" data-question="development-priorities">
                                <div class="question-header">
                                    <span class="warning-icon">‚ö†Ô∏è</span>
                                    <strong>Development Priorities</strong>
                                </div>
                                What technical capabilities need development?
                                <ul>
                                    <li>Automated performance scoring algorithms</li>
                                    <li>Customer-facing configuration management tools</li>
                                    <li>Predictive analytics for proactive intervention</li>
                                    <li>Standardized performance benchmarking framework</li>
                                </ul>
                                <textarea class="answer-input" placeholder="Enter discussion notes and decisions..."></textarea>
                            </div>
                        </div>

                        <div class="subsection">
                            <h4>AEP Team Structure</h4>
                            
                            <div class="phase-item">
                                <strong>Recommended Team Composition:</strong>
                                <ul>
                                    <li><strong>Performance Engineering Lead</strong> - Systems analysis and optimization</li>
                                    <li><strong>Customer Success Engineering</strong> - Configuration management and support</li>
                                    <li><strong>Data Analytics Specialist</strong> - Performance metrics and insights</li>
                                    <li><strong>Field Application Engineer</strong> - Customer interface and validation</li>
                                </ul>
                            </div>

                            <div style="background: #e8f5e8; padding: 20px; border-radius: 8px; margin: 15px 0;">
                                <strong>Success Metrics for AEP Team:</strong>
                                <div class="success-metric"><strong>Customer Performance Satisfaction:</strong> >95% meeting stated objectives</div>
                                <div class="success-metric"><strong>Configuration Success Rate:</strong> <15min time-to-optimal-settings</div>
                                <div class="success-metric"><strong>Proactive Issue Resolution:</strong> >80% issues resolved before customer impact</div>
                                <div class="success-metric"><strong>Fleet Performance Optimization:</strong> Year-over-year improvement tracking</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 6: Implementation Roadmap -->
            <div class="accordion-item">
                <button class="accordion-header">
                    <span>6. Implementation Roadmap & Next Steps</span>
                    <span class="accordion-icon">‚ñº</span>
                </button>
                <div class="accordion-content">
                    <div class="accordion-body">
                        <div class="phase-item">
                            <h4>Phase 1: Foundation (30 days)</h4>
                            <ul>
                                <li><strong>Team Workshop:</strong> Resolve outstanding questions from this document</li>
                                <li><strong>Baseline Assessment:</strong> Current performance capabilities and limitations</li>
                                <li><strong>Customer Research:</strong> Validate performance expectations across customer segments</li>
                            </ul>
                        </div>

                        <div class="phase-item">
                            <h4>Phase 2: Framework Development (60 days)</h4>
                            <ul>
                                <li><strong>Performance Scoring:</strong> Automated assessment algorithms</li>
                                <li><strong>Configuration Tools:</strong> Customer-facing optimization interfaces</li>
                                <li><strong>Intervention Protocols:</strong> Escalation procedures and automation</li>
                            </ul>
                        </div>

                        <div class="phase-item">
                            <h4>Phase 3: Optimization & Scale (60-180 days)</h4>
                            <ul>
                                <li><strong>Predictive Analytics:</strong> Performance prediction capabilities</li>
                                <li><strong>Continuous Improvement:</strong> Fleet-wide optimization insights</li>
                                <li><strong>Customer Autonomy:</strong> Self-service performance management</li>
                            </ul>
                        </div>

                        <div style="background: #fff3cd; padding: 20px; border-radius: 10px; margin-top: 20px; border-left: 5px solid #ffc107;">
                            <h4>‚ö†Ô∏è Immediate Actions Required:</h4>
                            <ol>
                                <li><strong>Team Workshop:</strong> Schedule session to address outstanding questions</li>
                                <li><strong>Customer Investigation:</strong> Interview customers about performance expectations</li>
                                <li><strong>Technical Deep Dive:</strong> Map monitoring capabilities to required metrics</li>
                                <li><strong>Pilot Selection:</strong> Choose test customers for framework validation</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <button class="scroll-top" onclick="scrollToTop()">‚Üë</button>

    <script>
        let editMode = false;

        // Improved accordion functionality with scroll position preservation
        function initializeAccordion() {
            const accordionHeaders = document.querySelectorAll('.accordion-header');
            
            accordionHeaders.forEach(header => {
                header.addEventListener('click', (e) => {
                    e.preventDefault();
                    
                    // Store current scroll position relative to the header
                    const headerTop = header.getBoundingClientRect().top + window.pageYOffset;
                    const currentScrollOffset = window.pageYOffset - headerTop;
                    
                    const content = header.nextElementSibling;
                    const isActive = header.classList.contains('active');
                    
                    // Close all other accordions
                    accordionHeaders.forEach(otherHeader => {
                        if (otherHeader !== header) {
                            otherHeader.classList.remove('active');
                            otherHeader.nextElementSibling.classList.remove('active');
                        }
                    });
                    
                    // Toggle current accordion
                    if (isActive) {
                        header.classList.remove('active');
                        content.classList.remove('active');
                    } else {
                        header.classList.add('active');
                        content.classList.add('active');
                        
                        // Maintain scroll position at the header after expansion
                        setTimeout(() => {
                            const newHeaderTop = header.getBoundingClientRect().top + window.pageYOffset;
                            window.scrollTo({
                                top: newHeaderTop,
                                behavior: 'smooth'
                            });
                        }, 50); // Small delay to allow content to expand
                    }
                });
            });
        }

        // Edit mode functionality
        function toggleEditMode() {
            editMode = !editMode;
            const body = document.body;
            const toggleBtn = document.querySelector('.edit-toggle');
            const saveBtn = document.querySelector('.save-btn');
            
            if (editMode) {
                body.classList.add('edit-mode');
                toggleBtn.textContent = 'üëÅÔ∏è View Mode';
                toggleBtn.classList.add('active');
                saveBtn.style.display = 'inline-block';
                loadSavedAnswers();
            } else {
                body.classList.remove('edit-mode');
                toggleBtn.textContent = 'üìù Enable Interactive Mode';
                toggleBtn.classList.remove('active');
                saveBtn.style.display = 'none';
            }
        }

        function saveAnswers() {
            const answers = {};
            document.querySelectorAll('[data-question]').forEach(questionEl => {
                const questionId = questionEl.getAttribute('data-question');
                const textarea = questionEl.querySelector('.answer-input');
                if (textarea && textarea.value.trim()) {
                    answers[questionId] = textarea.value.trim();
                    questionEl.classList.add('answered');
                }
            });
            localStorage.setItem('aep-answers', JSON.stringify(answers));
            
            // Show save confirmation
            const saveBtn = document.querySelector('.save-btn');
            const originalText = saveBtn.textContent;
            saveBtn.textContent = '‚úì Saved!';
            setTimeout(() => {
                saveBtn.textContent = originalText;
            }, 2000);
        }

        function loadSavedAnswers() {
            const saved = localStorage.getItem('aep-answers');
            if (saved) {
                const answers = JSON.parse(saved);
                Object.entries(answers).forEach(([questionId, answer]) => {
                    const questionEl = document.querySelector(`[data-question="${questionId}"]`);
                    if (questionEl) {
                        const textarea = questionEl.querySelector('.answer-input');
                        if (textarea) {
                            textarea.value = answer;
                            questionEl.classList.add('answered');
                        }
                    }
                });
            }
        }

        // Scroll to top functionality
        function initializeScrollTop() {
            const scrollTopBtn = document.querySelector('.scroll-top');
            
            window.addEventListener('scroll', () => {
                if (window.pageYOffset > 300) {
                    scrollTopBtn.classList.add('visible');
                } else {
                    scrollTopBtn.classList.remove('visible');
                }
            });
        }

        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // Initialize everything when page loads
        window.addEventListener('load', () => {
            initializeAccordion();
            initializeScrollTop();
            
            // Auto-expand first section
            const firstHeader = document.querySelector('.accordion-header');
            const firstContent = firstHeader.nextElementSibling;
            firstHeader.classList.add('active');
            firstContent.classList.add('active');
        });
    </script>
</body>
</html> 